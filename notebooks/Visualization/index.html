<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Visualization - Kamodo Analysis Suite</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Visualization";
    var mkdocs_page_input_path = "notebooks/Visualization.ipynb";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Kamodo Analysis Suite</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../about/">About</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Kamodo/">Introduction</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Visualization</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#visualization">Visualization</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#overview">Overview</a></li>
        
            <li><a class="toctree-l3" href="#available-plot-types">Available Plot Types</a></li>
        
            <li><a class="toctree-l3" href="#1-dimensional-line-plots">1-Dimensional line plots</a></li>
        
            <li><a class="toctree-l3" href="#time-series-data">Time series data</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#2-d-parametric-charts">2-D Parametric charts</a></li>
    

    <li class="toctree-l2"><a href="#3-dimensional-parametric-curves">3-Dimensional parametric curves</a></li>
    

    <li class="toctree-l2"><a href="#vector-fields">Vector fields</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#3d-vector-fields">3D vector fields</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#contour-plots">Contour plots</a></li>
    

    <li class="toctree-l2"><a href="#skew-carpet-plots">Skew (Carpet) Plots</a></li>
    

    <li class="toctree-l2"><a href="#parametric-surfaces">Parametric surfaces</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#map-to-plane">Map-to-plane</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#multiple-traces">Multiple traces</a></li>
    

    <li class="toctree-l2"><a href="#interactive-plotting">Interactive Plotting</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Syntax/">Syntax</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Kamodofying_Models/">Kamodofying Models</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../FieldIntegration/">Field Integration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../kameleon-kamodo/">Kameleon</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../TIEGCM/">TIEGCM</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Kamodo Analysis Suite</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Visualization</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="visualization">Visualization<a class="headerlink" href="#visualization" title="Permanent link">&para;</a></h2>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>Visualization poses a significant challenge for the space weather community: output from models and data are very domain-specific, both in content (coordinate systems, units) and in representation (file formats and data structures). On the other hand, science users also have their preferred context for analyzing these results - for instance, they may only want simulation results interpolated on a satellite trajectory and in a specific coordinate system with their own prefered units.</p>
<p>Kamodo aims to strike a balance between the intent of the model (or data) provider and the goals of the user, by making it easy for developers to provide context for their output and for users to easily change that context. It accomplishes this in two ways:</p>
<ul>
<li>By leveraging default arguments given by model and data providers </li>
<li>By mapping the shape of function inputs and output to certain registered plot types</li>
</ul>
<p>This strategy allows Kamodo to automatically generate plots for arbitrary model output and data sources, while still allowing for customization by the end user.</p>
<h3 id="available-plot-types">Available Plot Types<a class="headerlink" href="#available-plot-types" title="Permanent link">&para;</a></h3>
<p>Kamodo keeps a registry of plotting functions, indexed by argument shape and output shape.</p>
<pre><code class="python">from kamodo.plotting import plot_types
plot_types
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>plot_type</th>
      <th>function</th>
    </tr>
    <tr>
      <th>out_shape</th>
      <th>arg_shapes</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>(1,)</th>
      <th>((N, M), (N, M), (N, M))</th>
      <td>3d-parametric</td>
      <td>&lt;function surface at 0x12e9b2620&gt;</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">(N,)</th>
      <th>((N,),)</th>
      <td>1d-line</td>
      <td>&lt;function line_plot at 0x11cbc3a60&gt;</td>
    </tr>
    <tr>
      <th>((N,), (N,), (N,))</th>
      <td>3d-line-scalar</td>
      <td>&lt;function line_plot at 0x11cbc3a60&gt;</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">(N, 2)</th>
      <th>((N,),)</th>
      <td>2d-line</td>
      <td>&lt;function line_plot at 0x11cbc3a60&gt;</td>
    </tr>
    <tr>
      <th>((N, 2),)</th>
      <td>2d-vector</td>
      <td>&lt;function vector_plot at 0x12e9b2378&gt;</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">(N, 3)</th>
      <th>((N,),)</th>
      <td>3d-line</td>
      <td>&lt;function line_plot at 0x11cbc3a60&gt;</td>
    </tr>
    <tr>
      <th>((N, 3),)</th>
      <td>3d-vector</td>
      <td>&lt;function vector_plot at 0x12e9b2378&gt;</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">(N, M)</th>
      <th>((N,), (M,))</th>
      <td>2d-contour</td>
      <td>&lt;function contour_plot at 0x12e9b2488&gt;</td>
    </tr>
    <tr>
      <th>((N, M), (N, M))</th>
      <td>2d-contour-skew</td>
      <td>&lt;function contour_plot at 0x12e9b2488&gt;</td>
    </tr>
    <tr>
      <th>((N, M), (N, M), (N, M))</th>
      <td>3d-parametric-scalar</td>
      <td>&lt;function surface at 0x12e9b2620&gt;</td>
    </tr>
    <tr>
      <th>((1,), (N, M), (N, M))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
    <tr>
      <th>((N, M), (1,), (N, M))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
    <tr>
      <th>((N, M), (N, M), (1,))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">(N, M, 1)</th>
      <th>((1,), (N,), (M,))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
    <tr>
      <th>((N,), (1,), (M,))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
    <tr>
      <th>((N,), (M,), (1,))</th>
      <td>3d-plane</td>
      <td>&lt;function plane at 0x12e9b2598&gt;</td>
    </tr>
  </tbody>
</table>
</div>

<p>When a user tries to plot a given variable, a lookup is made into the table above and the corresponding plotting function is used to generate the output. Examples below demonstrate the intended workflow.</p>
<h3 id="1-dimensional-line-plots">1-Dimensional line plots<a class="headerlink" href="#1-dimensional-line-plots" title="Permanent link">&para;</a></h3>
<pre><code class="python">from kamodo import Kamodo, kamodofy
kamodo = Kamodo('g_N[kg] = x_N**2')
kamodo['f[g]'] = 'g_N'
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{g_{N}}{\left(x_{N} \right)} [kg] = x_{N}^{2}\end{equation}</script>
<script type="math/tex; mode=display">\begin{equation}f{\left(x_{N} \right)} [g] = 1000 \operatorname{g_{N}}{\left(x_{N} \right)}\end{equation}</script>
</p>
<p>Here we have defined a function <script type="math/tex">g_N</script> which returns an array of shape <script type="math/tex">N</script>. As input, it takes one argument <script type="math/tex">x_N</script> which also has size <script type="math/tex">N</script>. We also generate a function <script type="math/tex">f</script> which is the same as <script type="math/tex">g_N</script> but with a different units.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We could have named the function <script type="math/tex">g</script> instead of <script type="math/tex">g_N</script>. The variable names have no bearing on the resulting plots - only the argument input shapes and output shapes matter.</p>
</div>
<p>When we call Kamodo's plot function, we define which variable we are plotting and domain over which the arguments are applied:</p>
<pre><code class="python">import numpy as np
import plotly.io as pio

fig = kamodo.plot(f = dict(x_N = np.linspace(-4, 3, 30)))
pio.write_image(fig, 'images/1d-line.svg')
</code></pre>

<p><img alt="1d" src="../images/1d-line.svg?1" /></p>
<p>This is the graph <script type="math/tex">f(x_n)</script> for <script type="math/tex">x_N \in [-4,3]</script>.</p>
<h3 id="time-series-data">Time series data<a class="headerlink" href="#time-series-data" title="Permanent link">&para;</a></h3>
<p>The process for time series data is the same, except we use a pandas datetime index for the input argument.</p>
<pre><code class="python">import pandas as pd
t_N = pd.date_range('Nov 9, 2018', 'Nov 20, 2018', freq = 'H')
</code></pre>

<pre><code class="python">@kamodofy(units = 'kg/m^3')
def rho_N(t_N = t_N):
    dt_days = (t_N - t_N[0]).total_seconds()/(24*3600)
    return 1+np.sin(dt_days) + .1*np.random.random(len(dt_days))

kamodo = Kamodo(rho_N = rho_N, verbose = False)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\rho_{N}{\left(t_{N} \right)} [kg/m^3] = \lambda{\left(t_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('rho_N')
</code></pre>

<p>In this case, we only need to name the variable we wish to plot, because we have already defined a function <script type="math/tex">rho_N(t_N)</script> with a default parameter for <script type="math/tex">t_N</script>. </p>
<pre><code class="python">pio.write_image(fig, 'images/1d-time-series.svg')
</code></pre>

<p><img alt="timeseries" src="../images/1d-time-series.svg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By providing default parameters, the function author can insure that anyone plotting the variable will not need to know where to place resolution!</p>
</div>
<h2 id="2-d-parametric-charts">2-D Parametric charts<a class="headerlink" href="#2-d-parametric-charts" title="Permanent link">&para;</a></h2>
<p>For 2-D Plots, the output function must have input shape <script type="math/tex">(N,1)</script> and output shape <script type="math/tex">(N,2)</script>.</p>
<pre><code class="python">from kamodo import Kamodo
@kamodofy(units = 'cm')
def x_Ncomma2(theta_N = np.linspace(0,6*np.pi, 200)):
    r = theta_N
    x = r*np.cos(theta_N)
    y = r*np.sin(theta_N)
    return np.array(list(zip(x,y)))

kamodo = Kamodo(x_Ncomma2 = x_Ncomma2)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{x_{N,2}}{\left(\theta_{N} \right)} [cm] = \lambda{\left(\theta_{N} \right)}\end{equation}</script>
</p>
<p>Here, we again provide a default array for <script type="math/tex">\theta_N</script> so the end user does not need to:</p>
<pre><code class="python">fig = kamodo.plot('x_Ncomma2')
pio.write_image(fig, 'images/fig-2d.svg')
</code></pre>

<p><img alt="param2d" src="../images/fig-2d.svg" /></p>
<h2 id="3-dimensional-parametric-curves">3-Dimensional parametric curves<a class="headerlink" href="#3-dimensional-parametric-curves" title="Permanent link">&para;</a></h2>
<p>For 3-D parametric curves, the output function must have input shape <script type="math/tex">(N,1)</script> and output shape <script type="math/tex">(N,3)</script>.</p>
<pre><code class="python">@kamodofy(units = 'km')
def x_Ncomma3(t_N = pd.date_range('Nov 12, 2018', 'Dec 30, 2018', freq = '4 H')):
    dt_days = (t_N - t_N[0]).total_seconds()/(24*3600)
    theta = dt_days*np.pi/5
    r = theta
    x = r*np.cos(theta)
    y = r*np.sin(theta)
    z = r
    return np.array(list(zip(x,y,z)))

kamodo = Kamodo(x_Ncomma3 = x_Ncomma3)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{x_{N,3}}{\left(t_{N} \right)} [km] = \lambda{\left(t_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('x_Ncomma3')
pio.write_image(fig, 'images/3d-line.svg')
</code></pre>

<p><img alt="3d-line" src="../images/3d-line.svg" /></p>
<p>Functions of three N-d arrays are also interpreted as 3D parametric plots, but with an additonal color component.</p>
<pre><code class="python">s = np.linspace(0, 8*np.pi, 100)
x = 10*np.sin(s/8)
y = 10*np.sin(s)
z = s

@kamodofy(units = 'kg')
def f_N(x_N = x, y_N = y, z_N = z):
    return x_N**2+y_N**2+z_N**2

kamodo = Kamodo(f_N = f_N)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{N}}{\left(x_{N},y_{N},z_{N} \right)} [kg] = \lambda{\left(x_{N},y_{N},z_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('f_N')
pio.write_image(fig, 'images/3d-points.svg')
</code></pre>

<p><img alt="3d-points" src="../images/3d-points.svg" /></p>
<h1 id="vector-fields">Vector fields<a class="headerlink" href="#vector-fields" title="Permanent link">&para;</a></h1>
<p>Kamodo generates a 2-d vector (quiver) plot for functions of one variable, if both the input and output have shape (N,2). The input positions are assumed to be <script type="math/tex">x</script>,<script type="math/tex">y</script> and the output vectors are assumed to be <script type="math/tex">v_x</script>, <script type="math/tex">v_y</script>
</p>
<pre><code class="python">theta_N = np.linspace(0,6*np.pi, 200)
r = theta_N
x = r*np.cos(theta_N)
y = r*np.sin(theta_N)
points = np.array(list(zip(x,y)))

@kamodofy(units = 'cm')
def fvec_Ncomma2(rvec_Ncomma2 = points):
    return rvec_Ncomma2

kamodo = Kamodo(fvec_Ncomma2 = fvec_Ncomma2)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\vec{f}_{N,2}{\left(\vec{r}_{N,2} \right)} [cm] = \lambda{\left(\vec{r}_{N,2} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('fvec_Ncomma2')
pio.write_image(fig, 'images/fig2d-vector.svg')
</code></pre>

<p><img alt="fig2dvec" src="../images/fig2d-vector.svg" /></p>
<p>If we wish to represent a grid of vectors, we must first unravel the grid as a string of points.</p>
<pre><code class="python">x = np.linspace(-np.pi, np.pi, 25)
y = np.linspace(-np.pi, np.pi, 30)
xx, yy = np.meshgrid(x,y)
points = np.array(list(zip(xx.ravel(), yy.ravel())))

def fvec_Ncomma2(rvec_Ncomma2 = points):
    ux = np.sin(rvec_Ncomma2[:,0])
    uy = np.cos(rvec_Ncomma2[:,1])
    return np.vstack((ux,uy)).T

kamodo = Kamodo(fvec_Ncomma2 = fvec_Ncomma2)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\vec{f}_{N,2}{\left(\vec{r}_{N,2} \right)} = \lambda{\left(\vec{r}_{N,2} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('fvec_Ncomma2')
pio.write_image(fig, 'images/fig2d-vector-field.svg')
</code></pre>

<p><img alt="fig2dvec" src="../images/fig2d-vector-field.svg" /></p>
<h3 id="3d-vector-fields">3D vector fields<a class="headerlink" href="#3d-vector-fields" title="Permanent link">&para;</a></h3>
<p>Functions representing 3D vector fields should have one argument of shape (N,3) and an output shape of (N,3)</p>
<pre><code class="python">x, y, z = np.meshgrid(np.linspace(-2,2,4),
                      np.linspace(-3,3,6),
                      np.linspace(-5,5,10))
points = np.array(list(zip(x.ravel(), y.ravel(), z.ravel())))
def fvec_Ncomma3(rvec_Ncomma3 = points):
    return rvec_Ncomma3

kamodo = Kamodo(fvec_Ncomma3 = fvec_Ncomma3)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\vec{f}_{N,3}{\left(\vec{r}_{N,3} \right)} = \lambda{\left(\vec{r}_{N,3} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('fvec_Ncomma3')
pio.write_image(fig, 'images/fig3d-vector.svg')
</code></pre>

<p><img alt="fig3dvec" src="../images/fig3d-vector.svg" /></p>
<h1 id="contour-plots">Contour plots<a class="headerlink" href="#contour-plots" title="Permanent link">&para;</a></h1>
<p>Scalar functions of two variables of size (N) and (M) and output size (N,M) will generate contour plots. Kamodo can handle both <code>ij</code> indexing and <code>xy</code> indexing.</p>
<pre><code class="python">from kamodo import Kamodo
@kamodofy(units = 'cm^2')
def f_NcommaM(x_N = np.linspace(0, 8*np.pi,100), y_M = np.linspace(0, 5, 90)):
    x, y = np.meshgrid(x_N, y_M, indexing = 'xy')
    return np.sin(x)*y

kamodo = Kamodo(f_NcommaM = f_NcommaM)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{N,M}}{\left(x_{N},y_{M} \right)} [cm^2] = \lambda{\left(x_{N},y_{M} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('f_NcommaM')
pio.write_image(fig, 'images/fig2d-contour.svg')
</code></pre>

<p><img alt="contour" src="../images/fig2d-contour.svg" /></p>
<p>Since <script type="math/tex">x_N</script> and <script type="math/tex">y_M</script> have differnt sizes, we could have used <code>indexing=ij</code> as an argument to meshgrid and kamodo would have produced the same figure - Kamodo swaps the ordering where appropriate. In the event that <em>both</em> arguments have the same size, we can pass an <code>indexing</code> argument as an option to the plot function.</p>
<pre><code class="python">@kamodofy(units = 'cm^2')
def f_NN(x_N = np.linspace(0, 8*np.pi, 90), y_N = np.linspace(0, 5, 90)):
    x, y = np.meshgrid(x_N, y_N, indexing = 'xy')
    return np.sin(x)*y

kamodo = Kamodo(f_NN = f_NN)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{NN}}{\left(x_{N},y_{N} \right)} [cm^2] = \lambda{\left(x_{N},y_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot(f_NN = dict(indexing = 'xy'))
pio.write_image(fig, 'images/fig2d-contour-xy.svg')
</code></pre>

<p><img alt="fig2dcontourxy" src="../images/fig2d-contour-xy.svg" /></p>
<h1 id="skew-carpet-plots">Skew (Carpet) Plots<a class="headerlink" href="#skew-carpet-plots" title="Permanent link">&para;</a></h1>
<p>Functions of two arguments each having shape (N,M) matching the output shape will produce skewed contour plots, whereby the x and y components of the grid are independent.</p>
<pre><code class="python">r = np.linspace(1, 3, 20)
theta = np.linspace(0, np.pi, 14)
r_, theta_ = np.meshgrid(r,theta)
XX = r_*np.cos(theta_)
YY = r_*np.sin(theta_)

@kamodofy(units = 'cm^2')
def f_NM(x_NM = XX, y_NM = YY):
    return np.sin(x_NM)+y_NM

kamodo = Kamodo(f_NM = f_NM)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{NM}}{\left(x_{NM},y_{NM} \right)} [cm^2] = \lambda{\left(x_{NM},y_{NM} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('f_NM')
pio.write_image(fig, 'images/fig2d-skew.svg')
</code></pre>

<p><img alt="fig2dskew" src="../images/fig2d-skew.svg" /></p>
<h1 id="parametric-surfaces">Parametric surfaces<a class="headerlink" href="#parametric-surfaces" title="Permanent link">&para;</a></h1>
<p>To generate a purely geometrical parametric surface, supply a functions of three variables, each of size (N,M) and of output shape (1).</p>
<pre><code class="python">from kamodo import Kamodo
u = np.linspace(-2, 2, 40)
v = np.linspace(-2, 2, 50)
uu, vv = np.meshgrid(u,v)

@kamodofy(units = 'cm')
def parametric(x_NM = uu*np.sin(vv*np.pi), 
               y_NM = vv, 
               z_NM = np.exp(-uu**2-vv**2)):
    return np.array([1])
kamodo = Kamodo(p = parametric)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}p{\left(x_{NM},y_{NM},z_{NM} \right)} [cm] = \lambda{\left(x_{NM},y_{NM},z_{NM} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('p')
pio.write_image(fig, 'images/3d-parametric.svg')
</code></pre>

<p><img alt="3dparametric" src="../images/3d-parametric.svg" /></p>
<p>To control the color of the parametric surface, have the output shape be (N,M).</p>
<pre><code class="python">R = 1
theta = np.linspace(.2*np.pi, .8*np.pi, 40)
phi = np.linspace(0, 2*np.pi, 50)
theta_, phi_ = np.meshgrid(theta, phi)
r = (R +.1*(np.cos(10*theta_)*np.sin(14*phi_)))

xx = r*np.sin(theta_)*np.cos(phi_)
yy = r*np.sin(theta_)*np.sin(phi_)
zz = r*np.cos(theta_)

@kamodofy(units = 'cm')
def spherelike(x_NM = xx, y_NM = yy, z_NM = zz):
    return .1*x_NM + x_NM**2 + y_NM**2 + z_NM**2

kamodo = Kamodo(h_NM = spherelike)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{h_{NM}}{\left(x_{NM},y_{NM},z_{NM} \right)} [cm] = \lambda{\left(x_{NM},y_{NM},z_{NM} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('h_NM')
pio.write_image(fig, 'images/3d-parametric-color.svg')
</code></pre>

<p><img alt="parametric3dcolor" src="../images/3d-parametric-color.svg" /></p>
<h2 id="map-to-plane">Map-to-plane<a class="headerlink" href="#map-to-plane" title="Permanent link">&para;</a></h2>
<p>We often need to produce slices through a volumetric grid of data. This may be accomplished through the use of volumetric grid interpolators equipped with default values for each of the input arguments. Suppose such a function has default input arguments of size (L), (M), (N), and output shape (L,M,N), then a cartesian plane will be generated if the user overrides one of these defaults (e.g. setting <script type="math/tex">L = 1</script>).</p>
<pre><code class="python">@kamodofy(units = 'g/cm^3')
def f_LMN(
      x_L = np.linspace(-5, 5, 50), 
      y_M = np.linspace(0, 10, 75), 
      z_N = np.linspace(-20, 20, 100)):
    xx, yy, zz = np.meshgrid(x_L,y_M,z_N, indexing = 'xy')
    return xx + yy + zz

kamodo = Kamodo(f_LMN = f_LMN)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{LMN}}{\left(x_{L},y_{M},z_{N} \right)} [g/cm^3] = \lambda{\left(x_{L},y_{M},z_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot(f_LMN = dict(z_N = -5))
pio.write_image(fig,'images/fig2d-map-to-plane.svg')
</code></pre>

<p><img alt="maptoplane" src="../images/fig2d-map-to-plane.svg" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By providing appropriate defaults for the undelying grid structure, the interpolator author can ensure that the user can generate figures with optimal resolution!</p>
</div>
<h1 id="multiple-traces">Multiple traces<a class="headerlink" href="#multiple-traces" title="Permanent link">&para;</a></h1>
<p>Kamodo supports multiple traces in the same figure. Simply provide <code>plot</code> with multiple function-argument pairs.</p>
<pre><code class="python">from kamodo import Kamodo
t_N = pd.date_range('Nov 9, 2018', 'Nov 20, 2018', freq = 'H')

@kamodofy(units = 'kg/m^3')
def rho_N(t_N = t_N):
    dt_days = (t_N - t_N[0]).total_seconds()/(24*3600)
    return 1+np.sin(dt_days) + .1*np.random.random(len(dt_days))

@kamodofy(units = 'nPa')
def p_N(t_N = t_N):
    dt_days = (t_N - t_N[0]).total_seconds()/(24*3600)
    return 1+np.sin(2*dt_days) + .1*np.random.random(len(dt_days))


kamodo = Kamodo(rho_N = rho_N, p_N = p_N, verbose = False)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\rho_{N}{\left(t_{N} \right)} [kg/m^3] = \lambda{\left(t_{N} \right)}\end{equation}</script>
<script type="math/tex; mode=display">\begin{equation}\operatorname{p_{N}}{\left(t_{N} \right)} [nPa] = \lambda{\left(t_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot('p_N','rho_N')
pio.write_image(fig, 'images/multi-trace.svg')
</code></pre>

<p><img alt="multitrace" src="../images/multi-trace.svg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Plot types must be compatible for kamodo to plot different variables on the same axes.</p>
</div>
<p>Kamodo can also handle multiple traces in 3D</p>
<pre><code class="python">from kamodo import Kamodo, kamodofy

@kamodofy(units = 'g/cm^3')
def f_LMN(
      x_L = np.linspace(-5, 5, 50), 
      y_M = np.linspace(0, 10, 75), 
      z_N = np.linspace(-20, 20, 100)):
    xx, yy, zz = np.meshgrid(x_L,y_M,z_N, indexing = 'xy')
    return xx + yy + zz

kamodo = Kamodo(f_LMN = f_LMN, g_LMN = f_LMN)
kamodo
</code></pre>

<p>
<script type="math/tex; mode=display">\begin{equation}\operatorname{f_{LMN}}{\left(x_{L},y_{M},z_{N} \right)} [g/cm^3] = \lambda{\left(x_{L},y_{M},z_{N} \right)}\end{equation}</script>
<script type="math/tex; mode=display">\begin{equation}\operatorname{g_{LMN}}{\left(x_{L},y_{M},z_{N} \right)} [g/cm^3] = \lambda{\left(x_{L},y_{M},z_{N} \right)}\end{equation}</script>
</p>
<pre><code class="python">fig = kamodo.plot(f_LMN = dict(z_N = 0), 
                  g_LMN = dict(y_M = 5))
</code></pre>

<pre><code class="python">pio.write_image(fig, 'images/multi-trace3d.svg')
</code></pre>

<p><img alt="multi3d" src="../images/multi-trace3d.svg?1" /></p>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Multiple traces results in different colorbars which may overlap. More control over the layout will be available in future updates. </p>
</div>
<h1 id="interactive-plotting">Interactive Plotting<a class="headerlink" href="#interactive-plotting" title="Permanent link">&para;</a></h1>
<p>For interactive 3d plots, we take advantage of Plotly's in-browser plotting library.</p>
<pre><code class="python">from plotly.offline import iplot, plot, init_notebook_mode
</code></pre>

<p>To generate a separate interactive html page, use <code>iplot</code> instead of <code>plot</code>:</p>
<pre><code class="python">plot(fig, filename = 'sample_plot.html') #uncomment to render 3D interactive plot in this cell 
</code></pre>

<pre><code>'sample_plot.html'
</code></pre>
<p>navigate to the 3d interactive plot: <a href="../sample_plot.html">sample_plot.html</a>.</p>
<p>Alternatively, you may work with interactive plots directly in jupyter notebooks:</p>
<pre><code class="python"># init_notebook_mode() # uncomment to initialize plotly for notebook
# iplot(fig) #uncomment to render 3D interactive plot in this cell 
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We have commented out the above lines because they do not render properly on the documentation server, but rest assured they do work!</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Syntax/" class="btn btn-neutral float-right" title="Syntax">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Kamodo/" class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Kamodo/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Syntax/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>

</body>
</html>
